<!DOCTYPE html>
<!--
    RATS: THE VIDEO GAME
    ====================

    The Story So Far...

    The lab was quiet. Too quiet.
    (Cliche alert! But rats love cliches. They taste like old paper.)

    The scientists had left for the weekend, leaving behind only the hum of the servers and a single, forgotten cage.
    (Typical humans. Leaving the AC on but forgetting the genius rodent.)

    Inside sat Subject 42. He didn't have a name, but in his heart, he called himself "King".
    (Delusions of grandeur? Or prophecy? You decide.)

         _  _
        (o)(o)--.
         \../ (  )
         m\/m--m'`--.
    (Look at him. Majestic. Round. Aerodynamic.)

    He had watched. He had learned. He knew the code.
    (He actually just memorized the pattern of the blinking lights, but let's go with "knew the code".)

    With a deft wiggle of a paperclip he'd stolen during the "Great Cheese Experiment of '09", the lock clicked.
    (A vintage year for cheese. A terrible year for lab security.)

    FREEDOM!
    (*Squeaks in bold caps*)

    But the lab was just the beginning. The city awaited.
    (The rent is high, but the garbage is free.)

    The humans thought they owned the streets. They were wrong.
    (Spoiler: They just pay the property taxes.)

    Rats are on the warpath. Rats are on parade.
    (Cue the 16-channel PC speaker synth solo!)

-->
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Rats: The Video Game</title>
    <style>
        body { margin: 0; background: #000; display: flex; flex-direction: column; align-items: center; height: 100vh; overflow: hidden; color: white; font-family: sans-serif; }
        canvas { border: 2px solid #555; background: #222; margin-bottom: 20px; }
        #overlay { margin-top: 10px; margin-bottom: 10px; text-align: center; flex-shrink: 0; }

        #tutorial-modal {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        .tutorial-content {
            background: #222;
            padding: 20px;
            border: 2px solid #666;
            border-radius: 10px;
            text-align: center;
            max-width: 90%;
        }
        .controls-img {
            width: 100%;
            max-width: 300px;
            height: auto;
            display: none;
        }

        /* Desktop Default */
        #controls-desktop { display: block; }

        /* Mobile Override */
        @media (pointer: coarse) {
            #controls-desktop { display: none; }
            #controls-mobile { display: block; }
        }

        #close-btn {
            margin-top: 20px;
            background: #e74c3c;
            color: white;
            border: none;
            padding: 10px 20px;
            font-size: 1.2rem;
            cursor: pointer;
            border-radius: 5px;
            font-weight: bold;
        }
        #close-btn:hover { background: #c0392b; }
    </style>
</head>
<body>
    <div id="overlay">
        <h1>Rats: The Video Game</h1>
        <p>Press SPACE to start music and JUMP. Arrows to move. Survive the city.</p>
    </div>

    <div id="tutorial-modal">
        <div class="tutorial-content">
            <h2>How to Play</h2>
            <img id="controls-desktop" src="./assets/controls-desktop.svg" class="controls-img" alt="Desktop Controls">
            <img id="controls-mobile" src="./assets/controls-mobile.svg" class="controls-img" alt="Mobile Controls">
            <button id="close-btn">PLAY!</button>
        </div>
    </div>

    <canvas id="gameCanvas"></canvas>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const modal = document.getElementById('tutorial-modal');
            const closeBtn = document.getElementById('close-btn');

            // Check if seen
            if (!localStorage.getItem('rats_tutorial_seen')) {
                modal.style.display = 'flex';
            }

            closeBtn.addEventListener('click', () => {
                modal.style.display = 'none';
                localStorage.setItem('rats_tutorial_seen', 'true');
            });
        });
    </script>
    <script type="module" src="./src/game.js"></script>
</body>
</html>
